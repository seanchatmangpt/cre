digraph "WCP-28: Try-Catch" {
    rankdir=LR;
    node [shape=circle, fixedsize=true, width=0.6];
    edge [fontsize=10];

    // Places
    p_start [label="p_start"];
    p_try [label="p_try"];
    p_caught [label="p_caught"];
    p_error [label="p_error", xlabel="exception"];
    p_handler [label="p_handler"];
    p_end [label="p_end"];

    // Transitions
    t_enter [shape=box, label="enter try"];
    t_try [shape=box, label="try block"];
    t_success [shape=box, label="success"];
    t_fail [shape=box, label="raise"];
    t_catch [shape=box, label="catch"];
    t_handle [shape=box, label="handle"];
    t_complete [shape=box, label="complete"];

    // Arcs
    p_start -> t_enter;
    t_enter -> p_try;
    p_try -> t_try;
    t_try -> t_success [label="ok"];
    t_success -> p_caught;
    t_try -> t_fail [label="error"];
    t_fail -> p_error;
    p_error -> t_catch [label="matched"];
    t_catch -> p_handler;
    p_handler -> t_handle;
    t_handle -> p_caught;
    p_caught -> t_complete;
    t_complete -> p_end;
    p_error -> p_end [label="unmatched", style=dashed];

    {rank=min; p_start};
    {rank=max; p_end};
}
